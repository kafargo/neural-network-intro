# API Endpoints Reference

This document lists all available API endpoints after cleanup.

## Status & Health Check

### GET /api/status
Check if the API is running and get basic statistics.

**Response:**
```json
{
  "status": "online",
  "active_networks": 0,
  "training_jobs": 0
}
```

---

## Network Management

### POST /api/networks
Create a new neural network with specified architecture.

**Request Body:**
```json
{
  "layer_sizes": [784, 30, 10]  // Optional, defaults to [784, 30, 10]
}
```

**Response:**
```json
{
  "network_id": "uuid-string",
  "architecture": [784, 30, 10],
  "status": "created"
}
```

### GET /api/networks
List all available networks (both in-memory and saved).

**Response:**
```json
{
  "networks": [
    {
      "network_id": "uuid-string",
      "architecture": [784, 30, 10],
      "trained": true,
      "accuracy": 0.95,
      "status": "in_memory"
    }
  ]
}
```

### DELETE /api/networks/{network_id}
Delete a network from both memory and disk.

**Response:**
```json
{
  "network_id": "uuid-string",
  "deleted_from_memory": true,
  "deleted_from_disk": true
}
```

---

## Training

### POST /api/networks/{network_id}/train
Start asynchronous training for a network.

**Request Body:**
```json
{
  "epochs": 5,              // Optional, default: 5
  "mini_batch_size": 10,    // Optional, default: 10
  "learning_rate": 3.0      // Optional, default: 3.0
}
```

**Response:**
```json
{
  "job_id": "uuid-string",
  "network_id": "uuid-string",
  "status": "training_started"
}
```

### GET /api/training/{job_id}
Get the status of a training job.

**Response:**
```json
{
  "network_id": "uuid-string",
  "status": "training",
  "progress": 60.0,
  "epochs": 5,
  "accuracy": 0.92  // Only present when completed
}
```

---

## Test Examples

### GET /api/networks/{network_id}/successful_example
Get a random example that the network predicted correctly.

**Response:**
```json
{
  "network_id": "uuid-string",
  "example_index": 42,
  "predicted_digit": 7,
  "actual_digit": 7,
  "image_data": "base64-encoded-png",
  "output_weights": [[...], ...],
  "network_output": [0.01, 0.02, ..., 0.95, ...]
}
```

### GET /api/networks/{network_id}/unsuccessful_example
Get a random example that the network predicted incorrectly.

**Response:**
```json
{
  "network_id": "uuid-string",
  "example_index": 123,
  "predicted_digit": 8,
  "actual_digit": 3,
  "image_data": "base64-encoded-png",
  "output_weights": [[...], ...],
  "network_output": [0.01, 0.02, ..., 0.85, ...]
}
```

---

## WebSocket Events

### Event: training_update
Real-time training progress updates during network training.

**Payload:**
```json
{
  "job_id": "uuid-string",
  "network_id": "uuid-string",
  "epoch": 3,
  "total_epochs": 5,
  "accuracy": 0.92,
  "elapsed_time": 45.2,
  "progress": 60.0,
  "correct": 9200,
  "total": 10000
}
```

**Connection:**
```javascript
// Connect to WebSocket
const socket = io('http://localhost:8000');

// Listen for training updates
socket.on('training_update', (data) => {
  console.log(`Epoch ${data.epoch}/${data.total_epochs}`);
  console.log(`Accuracy: ${data.accuracy}`);
});
```

---

## Static Files

### GET /
Serves the main landing page (index.html) for network management.

### GET /{path}
Serves static files from the static directory.

---

## Notes

- All endpoints return JSON responses
- The API uses CORS with all origins enabled (`*`)
- WebSocket support is enabled via Socket.IO
- Images are returned as base64-encoded PNG strings
- Network IDs are UUIDs generated by the server
- Trained networks are automatically saved to disk

